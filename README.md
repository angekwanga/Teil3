GTFS-Datenstruktur
Die Daten im GTFS-Format liegen strukturiert vor und die einzelnen Dateien stehen in Verbindung miteinander. Diese Verbindungen zu erkennen und zu verstehen ist schwierig wenn nur die Dateien analysiert werden. Die folgende Grafik soll dabei helfen Ihnen die Zusammenhänge zu verdeutlichen.

Jede Linie der U- und S-Bahnen in Berlin ist mit einer Zeile in der Datei routes.txt gespeichert. Jede Linie hat eine eindeutige ID (route_id). Sie sehen im Feld route_short_name, dass einige Linien mehrfach auftauchen (wie bspw. die S3). Dies liegt an unterschiedlichen Start- und Endhaltestellen.
Jede Fahrt auf einer Linie ist als Eintrag in der Datei trips.txt gespeichert. Zu welcher Linie die Fahrt gehört ist über das Feld route_id erkennbar. Jede Fahrt wiederum hat ebenfalls eine eindeutige Nummer - die trip_id.
Die Information aus welchen Haltestellen eine Fahrt besteht wird über die Einträge in der Datei stop_times.txt ermittelt. Jeder Halt ist über die trip_id mit der Fahrt verbunden zu der er gehört. Zusätzlich finden Sie Informationen zu Ankunft (arrival_time), Abfahrt (departure_time) und Nummer des Halts auf der Fahrt (stop_sequence) in der Datei.
Zum Schluss muss noch die Information bereitgestellt werden, an welchem Bahnhof oder Gleis der Halt stattfindet. Dazu verfügt jeder Eintrag in stop_times.txt über das Feld stop_id. Diese ID gehört zu einem eindeutigen Eintrag in der Datei stops.txt. Hier sind alle Haltestellen gespeichert und besitzen mit der stop_id eine eindeutige Nummer. Um zu ermitteln ob es sich bei der Haltestelle um einen Bahnhof oder ein einzelnen Gleis handelt kann das Feld location_type verwendet werden. Ist hier der Wert 0 gespeichert handelt es sich um ein Gleis und im Feld parent_station ist die ID der Haltestelle des Bahnhofs gespeichert. Bahnhöfe besitzen den Wert 1 im Feld location_type (https://gtfs.org/documentation/schedule/reference/#stopstxt).
Diese Informationen reichen für die Bearbeitung dieser Übung aus. Informieren Sie sich selbst über den Inhalt der anderen Dateien.
